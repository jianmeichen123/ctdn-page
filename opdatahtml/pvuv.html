<link rel="stylesheet" type="text/css" href="../css/revision.css">
<link rel="stylesheet" type="text/css" href="../css/basis.css">
<script src="../js/jquery-1.12.3.min.js"></script>
<script src="../js/echarts_3.2.3.js"></script>
<script src="../js/platformUrl.js"></script>
<script src="../js/common.js"></script>
<div class="popup_project">
	<div class="popup_project_title"><span class="popup_ico"></span><span id="popup_name"></span></div>
	<div class="project_popup_all">
		<ul class="popup_classify">
			<li class="popup_classify_on" attr-name="one_popup">PV</li>
			<li attr-name="two_popup">UV</li>
			<li attr-name="three_popup">排名</li>
		</ul>
		<div><span class="fr m_r_20 chart_on_span">最近三个月</span></div>
		<div class="one_list_on" id="one_popup">

			<div class=" chart_on" id="option_download"></div>
		</div>
		<div class="one_list_on none" id="two_popup">
			<div class=" chart_on" id="option_rveryday"></div>
		</div>
		<div class="one_list_on none" id="three_popup">
			<div class=" chart_on" id="option_star"></div>
		</div>
	</div>
</div>
<input type="hidden" id="id" />
<script>
sendPostRequest(dataUrl["pvuv"]+$("#id").val(),opCallBack["pvuv"]);
//切换
$('.popup_classify li').click(function (){
	$('.popup_classify li').removeClass('popup_classify_on');
	$(this).addClass('popup_classify_on')
	var name =$(this).attr('attr-name');
	$('.one_list_on').hide()
	$("#"+name).show();
})


//下载
var option_download = {
    title: {
        text: ''
    },
    tooltip : {
        trigger: 'axis'
    },
    legend: {
		 show: false,
        data:['']
    },
    toolbox: {
		 show: false,
        feature: {
            saveAsImage: {}
        }
    },
    grid: {
        left: '3%',
        right: '4%',
        bottom: '3%',
        containLabel: true
    },
    xAxis : [
        {
			axisLine : {
				show : true,
				lineStyle : {
					color : '#ccc',
					width : 1,
					type : 'solid'
				}
			},
			axisLabel : {
            	rotate: 30,
            	interval: 0,
                formatter: '{value}',
                textStyle: {
                    color: '#808080',
                    fontFamily:'微软雅黑'
                }
            },
			axisTick : {
				show : false
			},
            type : 'category',
            boundaryGap : false,
            data : []
        }
    ],
    yAxis : [
        {axisLine : {
				show : true,
				lineStyle : {
					color : '#ccc',
					width : 1,
					type : 'solid'
				}
			},
			axisLabel : {
            	interval: 0,
                formatter: '{value}',
                textStyle: {
                    color: '#808080',
                    fontFamily:'微软雅黑'
                }
            },
			axisTick : {
				show : false
			},
            type : 'value'
        }
    ],
    series : [

        {
            name:'',
            type:'line',
            stack: '',
             areaStyle: {normal: {}},
            label: {
                normal: {
                    show: false,
                    position: 'top'
                }
            },
			color : [ '#c1eaef'],
            data:[]
        }
    ]
};
var opCallBack = {
    pvuv :function(data){
        if (data.success){
            var  date = []
            var pv =[]
            var uv =[]
            var rank = []
            $(data.data).each(function(i,e){
                var str = e.date.toString()
                date.push(str.substring(0,4)+"-"+str.substring(4,6)+"-"+str.substring(6,8))
                pv.push(e.pv)
                uv.push(e.uv)
                if(!e.rank){
                    rank.push(0)
                }
            });
            var myChart_option_download = echarts.init(document.getElementById('option_download'));
            option_download.xAxis[0].data = date
            option_download.series[0].data = pv
            myChart_option_download.setOption(option_download);
            var myChart_option_rveryday = echarts.init(document.getElementById('option_rveryday'));
            option_download.series[0].data = uv
            myChart_option_rveryday.setOption(option_download)
            var myChart_option_star = echarts.init(document.getElementById('option_star'));
            option_download.series[0].data = rank
            myChart_option_star.setOption(option_download)
        }

    }
}
</script>
