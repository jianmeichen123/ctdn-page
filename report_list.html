<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>行业报告列表</title>
	<!--basis-->
	{(dn_basis.html)}
</head>

<body>
{(header.html)}
<div class="container m_t20">
	<div class="report_list_all">
		<table  data-url>
			<tbody>
			<ul id="ul"></ul>
			</tbody>
		</table>

			{-raw-}
			<script id="report_ls" type="text/x-jquery-tmpl">
					<li>
						<div class="report_list_img"><img src="${listPic}"></div>
						<div class="report_list_cen">
							<ul>
								<li class="report_list_cen_tit"><a href="report_detailed.html?id=${id}" target="_blank">${title}</a></li>
								<li class="report_list_cen_time"><span>${publishDate}</span><span></span><span>来源：${source}</span></li>
								<li class="report_list_cen_c">{{html reportBody}}</li>
							</ul>
							<div class="search_collect click_collect" type=4 code=${id}><span class="dn_ico dn_ico_list_collect_search dn_ico_list_collect" ></span>收藏</div>
						</div>
						<div class="dn_sy_line"></div>
					</li>
				</script>
			{-raw-}

		<!--<ul>-->
			<!--<li>-->
				<!--<div class="report_list_img"><img src="img/hy/l.png"></div>-->
				<!--<div class="report_list_cen">-->
					<!--<ul>-->
						<!--<li class="report_list_cen_tit"><a href="report_detailed_3.html" target="_blank">这个行业雇佣全球超40%人口，有7.8万亿美元市场，创新却最慢【星河研究院】</a></li>-->
						<!--<li class="report_list_cen_time"><span>2017-09-26</span><span></span><span>来源：星河研究院</span></li>-->
						<!--<li class="report_list_cen_c">有一个行业，承担着全球温饱的责任，有着7.8万亿美元的市场，雇佣了全球超过40%的人口。但是根据麦肯锡的报告，相比其他行业，它是创新最慢的、数字化程度最低的。这个行业就是食品及农业。 也正因此，这个领域对科技和创新的需求更大...</li>-->
					<!--</ul>-->
					<!--<div class="search_collect"><span class="dn_ico dn_ico_list_collect_search"></span>收藏</div>-->
				<!--</div>-->
				<!--<div class="dn_sy_line"></div>-->
			<!--</li>-->
			<!--<li>-->
				<!--<div class="report_list_img"><img src="img/hy/l.png"></div>-->
				<!--<div class="report_list_cen">-->
					<!--<ul>-->
						<!--<li class="report_list_cen_tit"><a href="report_detailed_4.html" target="_blank">基因测序成本从1000万美元降到1000美元，创业风口来了吗？【星河研究院】</a></li>-->
						<!--<li class="report_list_cen_time"><span>2017-08-22</span><span></span><span>来源：星河研究院</span></li>-->
						<!--<li class="report_list_cen_c">基因可以在疾病、生育以及药物反应等方面给我们提供帮助。由于技术的进步，从“人类基因组计划”开始，基因测序的成本大幅下降。现在的成本是1000美元，而在十年前，这个价格还在1000万美元左右，再加上人工智能的发展，基因科技可以创造的价值越来越多。 随着贝瑞和康和华大基因的上市...</li>-->
					<!--</ul>-->
					<!--<div class="search_collect"><span class="dn_ico dn_ico_list_collect_search"></span>收藏</div>-->
				<!--</div>-->
				<!--<div class="dn_sy_line"></div>-->
			<!--</li>-->
		<!--</ul>-->
		<!---->
		
	</div>
	

</div>
{(dn_foot.html)}
<script src="js/table-init.js"></script>
<script src="js/jquery.tmpl.js"></script>
<script>
nav_locaton('hybg','44','','')
initTable();
loadTable();
function initTable() {
	var oTable = new TableInit();
	oTable.Init();
}
var TableInit = function () {
	var oTableInit = new Object();
	//初始化Table
	oTableInit.Init = function () {
		$("table[data-url]").bootstrapTable({
				pageSize:15,
				showRefresh : false ,
				sidePagination: 'server',
				method : 'post',
				pagination: true,
		 });
	};
	return oTableInit;
};

function loadTable(){
	 $("table[data-url]").bootstrapTable("refreshOptions",{
        url: detail.queryReportByPage,         //请求后台的URL（*）
        method: 'post',                      //请求方式（*）
        queryParamsType: 'size|page', // undefined
        striped: true,                      //是否显示行间隔色
        cache: true,                       //是否使用缓存，默认为true，所以一般情况下需要设置一下这个属性（*）
        pagination: true,                   //是否显示分页（*）
        sortable: true,                     //是否启用排序
        sortOrder: "desc",                   //排序方式
        tableDataName:'page',
        queryParams: queryParams, //参数
        undefinedText:table.empty,
        tableDataListName:'records',
        tableDataTotalName:'total',
        sidePagination: "server",           //分页方式：client客户端分页，server服务端分页（*）
        pageNumber: 1,                       //初始化加载第一页，默认第一页
        pageSize: 10,                       //每页的记录行数（*）
        pageList: [15,20,30],        //可供选择的每页的行数（*）
        formatLoadingMessage: function () {
            return "请稍等，正在加载中...";
        },
        formatNoMatches: function () {  //没有匹配的结果
             var noresult = "<div class='info-error'>"+
                            "<img src='../img/error_03.png'/>"+
                            "</div>"
             return noresult;
        },
        onLoadSuccess: function (data) {
			$("#ul").html("")
            var target =$("#report_ls")
            if(data.page && data.page.records){
            	for(i in data.page.records){
            		if(data.page.records[i]["reportBody"]){
            			if(data.page.records[i]["reportBody"].length>250){
            				data.page.records[i]["reportBody"] = data.page.records[i]["reportBody"].substring(0,250)+"...";
            			}
            		}
					if(isCollection("4",data.page.records[i]["id"]+'')){
					 $(".click_collect").toggleClass('dn_ico_list_collect_on');
					}
            	}
             	target.tmpl(data.page.records).appendTo($("#ul"))
            }
        }
    });
}

function queryParams(params) {  //配置参数
    var data = {};
    data["pageSize"]=params.pageSize,   //页面大小
    data["pageNo"]=params.pageNumber  //页码
    return data;
}
</script>
</body>
</html>
